{% schema %}
{
  "name": "Text Block Image",
  "tag": "section",
  "class": "shopify-section--image-with-text-block",
  "settings": [
    {
      "type": "image_picker",
      "id": "desktop_image",
      "label": "Desktop Image"
    },
    {
      "type": "image_picker",
      "id": "mobile_image",
      "label": "Mobile Image"
    },
    {
      "type": "text",
      "id": "top_text",
      "label": "Top Text",
      "default": "WINTERAKTION!"
    },
    {
      "type": "text",
      "id": "main_heading",
      "label": "Main Heading",
      "default": "10%: WINTER24"
    },
    {
      "type": "url",
      "id": "link",
      "label": "Link URL",
      "default": "/collections/all"
    },
    {
      "type": "text",
      "id": "link_text",
      "label": "Link Text",
      "default": "Jetzt einkaufen"
    }
  ],
  "presets": [
    {
      "name": "Image with Text Block - Winter",
      "category": "Custom"
    }
  ]
}
{% endschema %}

<section class="shopify-section shopify-section--image-with-text-block">
  <style>
    .shopify-section--image-with-text-block {
      --content-over-media-content-max-width: 250px;
    }

    @media screen and (min-width: 700px) {
      .shopify-section--image-with-text-block {
        --content-over-media-content-max-width: 380px;
      }
    }
  </style>

  <div class="color-scheme color-scheme--scheme-2">
    <image-banner class="image-with-text-block image-with-text-block--parallax content-over-media content-over-media--sm">
      <picture>
        {% if section.settings.mobile_image != blank %}
          <source
            media="(max-width: 699px)"
            srcset="{{ section.settings.mobile_image | image_url: width: 400 }} 400w,
                    {{ section.settings.mobile_image | image_url: width: 600 }} 600w,
                    {{ section.settings.mobile_image | image_url: width: 800 }} 800w,
                    {{ section.settings.mobile_image | image_url: width: 1000 }} 1000w"
            width="{{ section.settings.mobile_image.width }}"
            height="{{ section.settings.mobile_image.height }}"
          >
        {% endif %}
        {% if section.settings.desktop_image != blank %}
          <img
            src="{{ section.settings.desktop_image | image_url: width: 1200 }}"
            alt=""
            srcset="{{ section.settings.desktop_image | image_url: width: 200 }} 200w,
                    {{ section.settings.desktop_image | image_url: width: 400 }} 400w,
                    {{ section.settings.desktop_image | image_url: width: 600 }} 600w,
                    {{ section.settings.desktop_image | image_url: width: 800 }} 800w,
                    {{ section.settings.desktop_image | image_url: width: 1000 }} 1000w,
                    {{ section.settings.desktop_image | image_url: width: 1200 }} 1200w"
            width="{{ section.settings.desktop_image.width }}"
            height="{{ section.settings.desktop_image.height }}"
            loading="lazy"
            sizes="100vw"
          >
        {% endif %}
      </picture>

      <div class="content text-center">
        <div class="prose text-sm sm:text-base">
          {% if section.settings.top_text != blank %}
            <p class="h6"><strong>{{ section.settings.top_text }}</strong></p>
          {% endif %}
          {% if section.settings.main_heading != blank %}
            <div><h1>{{ section.settings.main_heading }}</h1></div>
          {% endif %}
          {% if section.settings.link != blank and section.settings.link_text != blank %}
            <a href="{{ section.settings.link }}" class="link">{{ section.settings.link_text }}</a>
          {% endif %}
        </div>
      </div>
    </image-banner>
  </div>
</section>
